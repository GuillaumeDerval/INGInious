$def with (monitoring_info, running_jobs)

$# Copyright (c) 2014 Universit√© Catholique de Louvain.
$#
$# This file is part of INGInious.
$#
$# INGInious is free software: you can redistribute it and/or modify
$# it under the terms of the GNU Affero General Public License as published
$# by the Free Software Foundation, either version 3 of the License, or
$# (at your option) any later version.
$#
$# INGInious is distributed in the hope that it will be useful,
$# but WITHOUT ANY WARRANTY; without even the implied warranty of
$# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
$# GNU Affero General Public License for more details.
$#
$# You should have received a copy of the GNU Affero General Public
$# License along with INGInious.  If not, see <http://www.gnu.org/licenses/>.

$var title: Statistics and monitoring

$# Start content
<h1>Statistics & monitoring</h1>
<div class="row">
	<div class="col-sm-6 col-xs-12">
		<p class="text-center">CPU usage</p>
		<div class="row center-block">
			<div class="progress">
				<div class="progress-bar" role="progressbar" aria-valuenow="$monitoring_info['cpu_percent']" aria-valuemin="0" aria-valuemax="100" style="width: $int(monitoring_info['cpu_percent']+0.5)%;">
					$monitoring_info['cpu_percent']%
				</div>
			</div>
		</div>
	</div>
	<div class="col-sm-6 col-xs-12">
		<p class="text-center">Memory usage</p>
		<div class="row center-block">
			<div class="progress">
				<div class="progress-bar" role="progressbar" aria-valuenow="$monitoring_info['memory_percent']" aria-valuemin="0" aria-valuemax="100" style="width: $int(monitoring_info['memory_percent']+0.5)%;">
					$monitoring_info['memory_percent']%
				</div>
			</div>
		</div>
	</div>
	<div class="col-sm-6 col-xs-12">
		<p class="text-center">Disk usage</p>
		<div class="row center-block">
			<div class="progress">
				<div class="progress-bar" role="progressbar" aria-valuenow="$monitoring_info['disk_percent']" aria-valuemin="0" aria-valuemax="100" style="width: $int(monitoring_info['disk_percent']+0.5)%;">
					$monitoring_info['disk_percent']%
				</div>
			</div>
		</div>
	</div>
	<div class="col-sm-6 col-xs-12">
		<p class="text-center">Swap usage</p>
		<div class="row center-block">
			<div class="progress">
				<div class="progress-bar" role="progressbar" aria-valuenow="$monitoring_info['swap_percent']" aria-valuemin="0" aria-valuemax="100" style="width: $int(monitoring_info['swap_percent']+0.5)%;">
					$monitoring_info['swap_percent']%
				</div>
			</div>
		</div>
	</div>
</div>
<table class="table table-bordered">
	<tr>
		<th># tasks running</th>
		<th>Median waiting time (seconds)</th>
	</tr>
	<tr>
		<td>$monitoring_info['running_jobs']</td>
		<td>$monitoring_info['mwt']</td>
	</tr>
</table>

$if len(running_jobs) != 0:
	<h2>Running tasks</h2>
	<table class="table table-bordered table-condensed">
		<tr>
			<th>Jobid</th>
			<th>Course</th>
			<th>Task</th>
			<th>Launcher name</th>
			<th>Started at</th>
		</tr>
		$for jobid, jobdata in running_jobs.iteritems():
			<tr>
				<td>$jobid</td>
				<td>$jobdata['courseid']</td>
				<td>$jobdata['taskid']</td>
				<td>$jobdata['launcher']</td>
				<td>$jobdata['started']</td>
            </tr>
	</table>